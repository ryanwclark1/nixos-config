From f94fe051cf25df9f333406a5f15713de5dcd9d02 Mon Sep 17 00:00:00 2001
From: Patch Porter <patch.porter@example.invalid>
Date: Sun, 14 Sep 2025 15:43:37 -0500
Subject: [PATCH] replace npm's ripgrep with local (ported to v0.4.1)

---
 package.json                       | 1 -
 packages/core/package.json         | 1 -
 packages/core/src/tools/ripGrep.ts | 3 +--
 3 files changed, 1 insertion(+), 4 deletions(-)

diff --git a/package.json b/package.json
index ab5a73a..5f610c1 100644
--- a/package.json
+++ b/package.json
@@ -91,7 +91,6 @@
     "yargs": "^17.7.2"
   },
   "dependencies": {
-    "@lvce-editor/ripgrep": "^1.6.0",
     "simple-git": "^3.28.0"
   },
   "optionalDependencies": {
diff --git a/packages/core/package.json b/packages/core/package.json
index 35a1630..c42706e 100644
--- a/packages/core/package.json
+++ b/packages/core/package.json
@@ -21,7 +21,6 @@
   ],
   "dependencies": {
     "@google/genai": "1.16.0",
-    "@lvce-editor/ripgrep": "^1.6.0",
     "@modelcontextprotocol/sdk": "^1.11.0",
     "@opentelemetry/api": "^1.9.0",
     "@opentelemetry/exporter-logs-otlp-grpc": "^0.203.0",
diff --git a/packages/core/src/tools/ripGrep.ts b/packages/core/src/tools/ripGrep.ts
index b851c2c..8868c50 100644
--- a/packages/core/src/tools/ripGrep.ts
+++ b/packages/core/src/tools/ripGrep.ts
@@ -8,7 +8,6 @@ import fs from 'node:fs';
 import path from 'node:path';
 import { EOL } from 'node:os';
 import { spawn } from 'node:child_process';
-import { rgPath } from '@lvce-editor/ripgrep';
 import type { ToolInvocation, ToolResult } from './tools.js';
 import { BaseDeclarativeTool, BaseToolInvocation, Kind } from './tools.js';
 import { SchemaValidator } from '../utils/schemaValidator.js';
@@ -293,7 +292,7 @@ class GrepToolInvocation extends BaseToolInvocation<
 
     try {
       const output = await new Promise<string>((resolve, reject) => {
-        const child = spawn(rgPath, rgArgs, {
+        const child = spawn('rg', rgArgs, {
           windowsHide: true,
         });
 
-- 
2.51.0

