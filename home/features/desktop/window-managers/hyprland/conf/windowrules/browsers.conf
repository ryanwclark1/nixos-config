# -----------------------------------------------------
# Web Browsers
# -----------------------------------------------------
# Rules for browser windows, Picture-in-Picture, and sharing indicators

# Browser Picture-in-Picture (enhanced - multiple patterns)
windowrule = match:title ^(Picture-in-Picture|Picture.?in.?[Pp]icture)$, float on
windowrule = match:title ^(Picture-in-Picture|Picture.?in.?[Pp]icture)$, pin on
windowrule = match:title ^(Picture-in-Picture)$, move 69.5% 4%
windowrule = match:title ^(Picture.?in.?[Pp]icture)$, move 100%-w-40 4%
windowrule = match:title ^(Picture-in-Picture)$, size 400 225
windowrule = match:title ^(Picture.?in.?[Pp]icture)$, size 600 338
windowrule = match:title ^(Picture-in-Picture|Picture.?in.?[Pp]icture)$, keep_aspect_ratio on
windowrule = match:title ^(Picture-in-Picture|Picture.?in.?[Pp]icture)$, border_size 0
windowrule = match:title ^(Picture.?in.?[Pp]icture)$, opacity 1 1

# Browser class detection (chromium-based and firefox-based)
# Chromium-based browsers: google-chrome, chromium, brave-browser, Microsoft-edge, Vivaldi-stable, helium
windowrule = match:class ^((google-)?[cC]hrom(e|ium)|[bB]rave-browser|Microsoft-edge|Vivaldi-stable|helium)$, tile on

# Browser opacity (subtle transparency, but not for video sites)
windowrule = match:class ^((google-)?[cC]hrom(e|ium)|[bB]rave-browser|Microsoft-edge|Vivaldi-stable|helium)$, opacity 1 0.97
windowrule = match:class ^([fF]irefox|zen|librewolf)$, opacity 1 0.97

# No opacity for video sites (YouTube, Zoom)
windowrule = match:initial_title ^((?i)(?:[a-z0-9-]+\.)*youtube\.com_/|app\.zoom\.us_/wc/home)$, opacity 1.0 1.0

# Idle inhibition for fullscreen video
windowrule = match:class ^(google-chrome)$, idle_inhibit fullscreen
windowrule = match:class ^(Google-chrome)$, idle_inhibit fullscreen
windowrule = match:class ^(firefox)$, idle_inhibit fullscreen

# Browser-specific rules (Google Chrome sharing indicator)
windowrule = match:class ^(Google-chrome)$, match:title ^(.*Sharing Indicator.*)$, suppress_event fullscreen
windowrule = match:class ^(Google-chrome)$, match:title ^(.*Sharing Indicator.*)$, move 50% 20
windowrule = match:class ^(Google-chrome)$, match:title ^(.*Sharing Indicator.*)$, size 300 50

# Workspace assignments (uncomment and customize as needed)
# windowrule = match:class ^(firefox)$, workspace 2
