# -----------------------------------------------------
# Hyprland Autostart Configuration  
# UWSM-optimized for proper systemd integration and session management
# -----------------------------------------------------
#
# This configuration uses UWSM (Universal Wayland Session Manager) for proper
# systemd integration. UWSM ensures applications run in appropriate systemd
# slices and get proper session management.
#
# Autostart execution order:
# 1. System services (hypridle, etc.)
# 2. Wallpaper engine initialization  
# 3. Desktop environment components (waybar, notifications)
# 4. System integration services (network, clipboard)
# 5. Optional workspace applications
#
# Note: exec-once commands run only on Hyprland startup, not on config reload
# -----------------------------------------------------

# =============================================================================
# SYSTEM SERVICES (Managed by systemd user services)
# =============================================================================
# Core system services that integrate with systemd
exec-once = systemctl --user start hypridle.service    # Idle management daemon

# =============================================================================
# WALLPAPER ENGINE INITIALIZATION
# =============================================================================  
# Initialize wallpaper system (swww daemon + configuration)
exec-once = $HYPR_SCRIPTS/system/init-wallpaper-engine.sh

# =============================================================================
# DESKTOP ENVIRONMENT COMPONENTS  
# =============================================================================
# Core desktop services launched via UWSM for proper session management
exec-once = uwsm app -- waybar           # Status bar with system information
exec-once = uwsm app -- swaync           # Notification daemon with UI

# =============================================================================
# SYSTEM INTEGRATION SERVICES
# =============================================================================  
# Services that integrate with system functionality
exec-once = uwsm app -- nm-applet --indicator    # Network manager system tray

# Background clipboard history management (no GUI)
exec-once = wl-paste --watch cliphist store       # Clipboard history daemon

# =============================================================================
# WALLPAPER MANAGEMENT
# =============================================================================
# Restore wallpaper settings (conditional - only if script exists)
exec-once = [[ -f $HYPR_SCRIPTS/hypr/wallpaper-manager.sh ]] && $HYPR_SCRIPTS/hypr/wallpaper-manager.sh restore

# =============================================================================
# OPTIONAL WORKSPACE APPLICATIONS
# =============================================================================
# Default applications on specific workspaces (uncomment if desired)
# The 'silent' flag prevents focusing the workspace during startup
# exec-once = [workspace 1 silent] uwsm app -- kitty
# exec-once = [workspace 2 silent] uwsm app -- google-chrome-stable

# =============================================================================
# ADDITIONAL SESSION SERVICES
# =============================================================================
# Additional user services for complete session setup (uncomment if needed)
# exec-once = systemctl --user start --no-block user-services@hyprland.target