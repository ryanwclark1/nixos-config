# vim:set ft=tmux:
# Uptime Plugin for tmux-forceline
# Cross-platform system uptime display

%hidden MODULE_NAME="uptime"

# Plugin metadata
set -g @_fl_plugin_uptime_version "2.0.0"
set -g @_fl_plugin_uptime_description "Cross-platform system uptime display"

# Uptime display configuration
set -ogq @forceline_uptime_format "short"        # short, compact, days, hours

# Base24 color configuration for uptime
set -ogq @forceline_uptime_fg "#{@fl_fg}"
set -ogq @forceline_uptime_bg "#{@fl_surface_0}"

# Plugin configuration using uptime format variables
set -ogq "@forceline_${MODULE_NAME}_icon" "ó°”Ÿ "
set -ogq "@forceline_${MODULE_NAME}_color" "#{@fl_base0D}"  # blue theme
set -ogq "@forceline_${MODULE_NAME}_text_fg" "#{@forceline_uptime_fg}"
set -ogq "@forceline_${MODULE_NAME}_text_bg" "#{@forceline_uptime_bg}"

# Uptime display format using standard uptime command
set -ogq "@forceline_${MODULE_NAME}_text" " #(uptime | awk '{print $3 $4}' | sed 's/,//')"

# Load the universal status module renderer
source -F "#{d:current_file}/../../utils/status_module.conf"

# Register plugin capabilities
set -ag @_fl_plugin_capabilities "uptime_display,cross_platform,format_options"