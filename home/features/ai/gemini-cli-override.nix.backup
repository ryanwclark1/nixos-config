{
  pkgs,
  lib,
  ...
}:

{
  # Override gemini-cli package with custom version
  # Use: gemini-cli-version latest    # to get latest version info
  # Use: gemini-cli-version check X.Y.Z  # to get hash for specific version  
  # Use: gemini-cli-version update X.Y.Z # to auto-update this file
  
  home.packages = with pkgs; [
    (gemini-cli.overrideAttrs (oldAttrs: rec {
      version = "0.2.2";  # Current nixpkgs version - update as needed
      
      src = pkgs.fetchFromGitHub {
        owner = "google-gemini";
        repo = "gemini-cli";
        tag = "v${version}";
        # Use: gemini-cli-version check 0.2.2
        hash = "sha256-ykNgtHtH+PPCycRn9j1lc8UIEHqYj54l0MTeVz6OhsQ=";
      };
      
      # Update npm dependencies hash if build fails
      # Run: nix-build '<nixpkgs>' -A gemini-cli
      # Use the hash from the error message
      npmDepsHash = "sha256-gpNt581BHDA12s+3nm95UOYHjoa7Nfe46vgPwFr7ZOU=";
      
      # Remove patches if they're no longer needed in newer version
      patches = [];
    }))
  ];
}